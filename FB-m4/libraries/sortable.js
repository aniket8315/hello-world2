!function(w){var i="mousedown touchstart MSPointerDown pointerdown",n="mouseup touchend MSPointerUp pointerup",r="mousemove touchmove MSPointerMove pointermove scroll";function m(t,e,i){l("transform",t,"translate("+e+"px, "+i+"px)")}function a(t,e){l("transition",t,e)}function y(t){return t=t.originalEvent||t,window.event&&window.event.changedTouches&&event.changedTouches[0].pageX||t.pageX}function b(t){return t=t.originalEvent||t,window.event&&window.event.changedTouches&&event.changedTouches[0].pageY||t.pageY}function l(t,e,i){for(var s=(t=t.toLowerCase()).charAt(0).toUpperCase()+t.substr(1),o=["webkit","Moz","ms","O"].map(function(t){return t+s}).concat("transform"),n=0,r=o.length;n<r;++n)if(o[n]in e.style){if(void 0===i)return e.style[o[n]];e.style[o[n]]=i;break}}var h=["altKey","bubbles","button","cancelable","charCode","clientX","clientY","ctrlKey","currentTarget","data","detail","eventPhase","metaKey","offsetX","offsetY","originalTarget","pageX","pageY","relatedTarget","screenX","screenY","shiftKey","target","view","which"];function x(t,e,i,s){if(t[0]){i=i.originalEvent||i;var o={};h.forEach(function(t){o[t]=i[t]}),o.currentTarget=o.target=t[0];var n=t[0].ownerDocument.defaultView||t[0].ownerDocument.parentWindow,r=n.$.Event(e,o);return n.$(t[0]).trigger(r,s),r}}var C,s=0,t=function(){var e;this.eventHandler=w("<div />"),this.parent=this.el=this.handle=null,this.origin={x:0,y:0,transition:null,translate:null,offset:{x:0,y:0}},this.lastEntered=this.currentTarget=null,this.lastX=this.lastY=this.lastDirection=null,this.originalCss={},this.windows=[window],Object.defineProperty(this,"placeholder",{get:function(){return e},set:function(t){e!==t&&(e&&e.remove(),e=t)}})};t.prototype.on=function(){return this.eventHandler.on.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},t.prototype.off=function(){return this.eventHandler.off.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},t.prototype.start=function(t,e,i,s){this.parent=t,this.el=e,this.handle=s;e=this.handle||this.el;this.origin.x=y(i),this.origin.y=b(i),this.origin.transform=l("transform",this.el[0]),this.origin.transition=l("transition",this.el[0]);var o=this.el[0].getBoundingClientRect();return this.origin.offset.x=o.left+(window.scrollX||window.pageXOffset)-this.origin.x,this.origin.offset.y=o.top+(window.scrollY||window.pageYOffset)-this.origin.y,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset,e[0].style.pointerEvents="none",this.windows.forEach(function(t){w(t).on(r,w.proxy(this.move,this)),w(t).on(n,w.proxy(this.stop,this))},this),a(e[0],""),x(this.eventHandler,"dragging:start",i),this.el},t.prototype.stop=function(t){if(this.last){var e=this.last;this.last=null,!x(w(e),"dragging:drop",t).isDefaultPrevented()}if(this.el){for(var i in this.originalCss)this.el.css(i,this.originalCss[i]),delete this.originalCss[i];x(this.eventHandler,"dragging:stop",t,this.el),this.placeholder=null,this.handle||this.adjustPlacement(t);var s=this.el;this.handle&&this.handle.remove(),setTimeout(function(t,e){a(t[0],"all 0.25s ease-in-out 0s"),l("transform",t[0],e.transform||""),setTimeout(a.bind(null,t[0],e.transition||""),250),t[0].style.pointerEvents=""}.bind(null,s,this.origin)),this.windows.forEach(function(t){w(t).off(r,this.move),w(t).off(n,this.stop)},this),this.parent=this.el=this.handle=null}},t.prototype.move=function(t){if(this.el){var e=(a=this.el[0].ownerDocument).defaultView||a.parentWindow;if("scroll"!==t.type){var i=y(t),s=b(t);t.view!==e&&t.view.frameElement&&(i+=t.view.frameElement.offsetLeft,s+=t.view.frameElement.offsetTop);var o,n=t.clientX||t.originalEvent&&t.originalEvent.clientX||window.event&&window.event.touches&&window.event.touches[0].clientX||0,r=t.clientY||t.originalEvent&&t.originalEvent.clientY||window.event&&window.event.touches&&window.event.touches[0].clientY||0,a=this.el[0].ownerDocument;o=E?(o=t.view.document.msElementsFromPoint(n,r))[0]===this.el[0]?o[1]:o[0]:t.view.document.elementFromPoint(n,r);var l=this.lastX-i,h=(0<(g=this.lastY-s)?"up":g<0&&"down")||0<l&&"up"||l<0&&"down"||this.lastDirection;C.currentTarget||this.setCurrent(o),this.currentTarget&&(o!==this.last&&this.lastEntered!==this.currentTarget?(x(w(this.lastEntered),"dragging:leave",t),x(w(this.currentTarget),"dragging:enter",t),this.lastEntered=this.currentTarget):h!==this.lastDirection&&x(w(this.currentTarget),"dragging:diverted",t)),this.last=o,this.currentTarget=null,this.lastDirection=h,this.lastX=i,this.lastY=s,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset}else i=this.lastX+((window.scrollX||window.pageXOffset)-this.origin.scrollX),s=this.lastY+((window.scrollY||window.pageYOffset)-this.origin.scrollY);if(t.view!==e&&t.view&&t.view.frameElement){var c=-1*(s-(window.scrollY||window.pageYOffset)-window.innerHeight),p=document.documentElement.offsetHeight<(window.scrollY||window.pageYOffset)+window.innerHeight;c<=10&&!p&&setTimeout(function(){window.scrollBy(0,5)},50);var d=s-(window.scrollY||window.pageYOffset),f=(window.scrollY||window.pageYOffset)<=0;d<=10&&!f&&setTimeout(function(){window.scrollBy(0,-5)},50)}l=i-this.origin.x;var g=s-this.origin.y,u=this.handle||this.el,v=parseFloat(document.querySelector('[data-id="innerWrapper"]').getAttribute("zoom"))||1;m(u[0],l/v,g/v)}},t.prototype.setCurrent=function(t){this.currentTarget=t},t.prototype.css=function(t,e){this.el&&(this.originalCss[t]=this.el.css(t),this.el.css(t,e))},t.prototype.adjustPlacement=function(t){var e=this.handle&&this.handle[0]||this.el[0];m(e,0,0);var i=e.getBoundingClientRect();this.origin.x=i.left+(window.scrollX||window.pageXOffset)-this.origin.offset.x,this.origin.y=i.top+(window.scrollY||window.pageYOffset)-this.origin.offset.y;var s=y(t)||this.lastX,o=b(t)||this.lastY;m(e,s-this.origin.x,o-this.origin.y)};try{parent.$&&parent.$.dragging&&(C=parent.$.dragging).windows.push(window)}catch(t){}C=w.dragging=C||new t;var f=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;function g(t){return Array.prototype.slice.call(t)}var E=!1;void 0===f&&((f=function(e){this.targets=[],this.onAdded=function(t){e([{addedNodes:[t.target],removedNodes:[]}])},this.onRemoved=function(t){e([{addedNodes:[],removedNodes:[t.target]}])}}).prototype.observe=function(t){t.addEventListener("DOMNodeInserted",this.onAdded),t.addEventListener("DOMNodeRemoved",this.onRemoved),this.targets.push(t)},f.prototype.disconnect=function(){for(var t;t=this.targets.shift();)t.removeEventListener("DOMNodeInserted",this.onAdded),t.removeEventListener("DOMNodeRemoved",this.onRemoved)},E=!!~navigator.appName.indexOf("Internet Explorer"));var o=function(t,r,s,o){var a=this;this.targets=t instanceof NodeList?Array.prototype.slice.call(t):[t];var l=">"===r[0],h=l?r.substr(1):r,n=!1;function c(t,e,i){var s,o,n;i&&(s=t,o=e,n=[],g(s).forEach(function(t){var e,i,s;1===t.nodeType&&(l&&-1===a.targets.indexOf(t.parentNode)||(i=h,(s=(e=t).matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector)&&s.call(e,i)&&n.push(t),!l&&o&&g(t.querySelectorAll(r)).forEach(function(t){n.push(t)})))}),n).filter(function(t,e,i){return i.indexOf(t)===e}).forEach(function(t){i.call(t)})}var e=null,p=[],d=[];function i(){a.disconnect();for(var t=0,e=d.length;t<e;++t){var i=p.indexOf(d[t]);-1<i&&(p.splice(i,1),d.splice(t--,1))}c(p,!(n&&E),s),c(d,!0,o),p.length=0,d.length=0,a.observe()}this.observer=new f(function(t){t.forEach(function(t){p.push.apply(p,t.addedNodes),d.push.apply(d,t.removedNodes)}),e&&clearTimeout(e),e=setTimeout(i)}),s&&this.targets.forEach(function(t){c(t.children,!0,s)}),n=!0,this.observe()};o.prototype.disconnect=function(){this.observer.disconnect()},o.prototype.observe=function(){var e=this;this.targets.forEach(function(t){e.observer.observe(t,{childList:!0,subtree:!0})})};var e=function(t,e){this.id=s++,this.el=w(t),this.opts=e,this.cancel=!1!==e.handle};e.prototype.create=function(){this.el.on(i,w.proxy(this.start,this)).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),C.on("dragging:stop",w.proxy(this.reset,this));var t=this;setTimeout(function(){t.el.trigger("draggable:create",t)})},e.prototype.destroy=function(){this.el.off(i,this.start),C.off("dragging:stop",this.reset)},e.prototype.enable=function(){this.opts.disabled=!1},e.prototype.disable=function(){this.opts.disabled=!0},e.prototype.start=function(t){if(this.opts.disabled)return!1;if("mousedown"===t.type&&1!==t.which)return!1;if(t=t.originalEvent||t,this.opts.cancel)for(var e=w(t.target);e[0]!==this.el[0];){if(e.is(this.opts.cancel))return;e=e.parent()}if(this.opts.handle){e=w(t.target);for(var i=!1;e[0]!==this.el[0];){if(e.is(this.opts.handle)){i=!0;break}e=e.parent()}if(!i)return}t.preventDefault();var s;this.el;if(this.opts.clone){"function"==typeof this.opts.clone?s=this.opts.clone.call(this.el):(s=this.el.clone(),this.opts.cloneClass&&s.addClass(this.opts.cloneClass));var o=this.el.position();s.css("position","absolute").css("left",o.left).css("top",o.top).width(this.el.width()).height(this.el.height()),s.insertAfter(this.el)}C.start(this,this.el,t,s),x(this.el,"draggable:start",t,{item:C.el})},e.prototype.reset=function(t,e){e===this.el[0]&&x(this.el,"draggable:stop",t,{item:C.el})};var c=function(t,e){this.id=s++,this.el=w(t),this.opts=e,this.accept=!1};c.prototype.create=function(){this.el.on("dragging:enter",w.proxy(this.enter,this)).on("dragging:leave",w.proxy(this.leave,this)).on("dragging:drop",w.proxy(this.drop,this)),C.on("dragging:start",w.proxy(this.activate,this)).on("dragging:stop",w.proxy(this.reset,this));var t=this;setTimeout(function(){t.el.trigger("droppable:create",t)})},c.prototype.destroy=function(){this.el.off("dragging:enter",this.enter).off("dragging:leave",this.leave).off("dragging:drop",this.drop)},c.prototype.enable=function(){this.opts.disabled=!1},c.prototype.disable=function(){this.opts.disabled=!0},c.prototype.activate=function(t){if(this.accept=C.parent.opts.connectWith&&this.el.is(C.parent.opts.connectWith),!this.accept){var e="*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],C.el):C.el.is(this.opts.accept));"default"!==this.opts.scope?(this.accept=C.parent.opts.scope===this.opts.scope,this.accept||"*"===this.opts.accept||(this.accept=e)):this.accept=e}this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),x(this.el,"droppable:activate",t,{item:C.el}))},c.prototype.reset=function(t){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.opts.hoverClass&&this.el.removeClass(this.opts.hoverClass),x(this.el,"droppable:deactivate",t,{item:C.el}))},c.prototype.enter=function(t){if(this.opts.disabled)return!1;t.stopPropagation(),C.placeholder&&C.placeholder.hide(),this.accept&&(this.opts.hoverClass&&this.el.addClass(this.opts.hoverClass),x(this.el,"droppable:over",t,{item:C.el}))},c.prototype.leave=function(t){if(this.opts.disabled)return!1;this.opts.hoverClass&&this.accept&&this.el.removeClass(this.opts.hoverClass),x(this.el,"droppable:out",t,{item:C.el})},c.prototype.drop=function(t){if(this.opts.disabled||!this.accept)return!1;if(C.el){var e=C.el,i="function"==typeof i&&this.opts.receiveHandler,s={item:e},o=null;C.handle&&(s.helper=C.handle,i||(o=s.clone=C.el.clone())),x(this.el,"droppable:drop",t,s).isDefaultPrevented()||(i?i.call(this.el,s):w(this.el).append(o||C.el))}};var p=function(t,e){this.id=s++,this.el=t,this.opts=e;var i=this.opts.placeholderTag;if(!i)try{i=this.el.find(this.opts.items)[0].tagName}catch(t){i=/^ul|ol$/i.test(this.el[0].tagName)?"li":"div"}this.placeholder=w("<"+i+' id="__ph'+this.id+'" class="'+this.opts.placeholder+'" />'),this.accept=this.index=this.direction=null};function d(n,r,a){return function(e,i,s){var o=[];return this.each(function(){var t=w(this).data(r);if("string"==typeof e){if(void 0===t)throw new Error(r+" not defined");switch(e){case"enable":t.enable();break;case"disable":t.disable();break;case"destroy":t.destroy(),w(this).removeData(r);break;case"option":void 0!==s?t.opts[i]=s:"object"==typeof i?t.opts=w.extend(t.opts,i):i?o.push(t.opts[i]):o.push(t.opts);break;case"toArray":if("sortable"!==r)return;o.push(t.toArray(i))}}else{if(t)return w.extend(t.opts,e),this;(t=new n(w(this),w.extend({},a,e))).create(),w(this).data(r,t)}}),o.length?1===o.length?o[0]:o:this}}p.prototype.create=function(){this.el.on(i,this.opts.items,w.proxy(this.start,this)).on("dragging:enter",this.opts.items,w.proxy(this.enter,this)).on("dragging:diverted",this.opts.items,w.proxy(this.diverted,this)).on("dragging:drop",this.opts.items,w.proxy(this.drop,this)),w(this.el).find(this.opts.items).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),this.el.on("dragging:enter",w.proxy(this.enter,this)).on("dragging:diverted",w.proxy(this.diverted,this)).on("dragging:drop",w.proxy(this.drop,this)),C.on("dragging:start",w.proxy(this.activate,this)).on("dragging:stop",w.proxy(this.reset,this));var e=this;setTimeout(function(){e.el.trigger("sortable:create",e)}),this.observer=new o(this.el[0],this.opts.items,function(){},function(){if(!(this===e.placeholder[0]||C.el&&this===C.el[0])){var t=w(this);t.css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),e.el.trigger("sortable:change",{item:t}),e.el.trigger("sortable:update",{item:t,index:-1})}})},p.prototype.destroy=function(){this.el.off(i,this.opts.items,this.start).off("dragging:enter",this.opts.items,this.enter).off("dragging:diverted",this.opts.items,this.diverted).off("dragging:drop",this.opts.items,this.drop),this.el.off("dragging:enter",this.enter).off("dragging:diverted",this.diverted).off("dragging:drop",this.drop),this.observer.disconnect()},p.prototype.enable=function(){this.opts.disabled=!1},p.prototype.disable=function(){this.opts.disabled=!0},p.prototype.activate=function(t){this.isEmpty=0===this.el.find(this.opts.items).length,this.accept=C.parent.id===this.id,!this.accept&&C.parent.opts.connectWith&&(this.accept=this.el.is(C.parent.opts.connectWith)),this.accept&&(this.accept=C.parent.id===this.id||"*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],C.el):C.el.is(this.opts.accept)),this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),x(this.el,"sortable:activate",t,{item:C.el})))},p.prototype.reset=function(t){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),x(this.el,"sortable:deactivate",t,{item:C.el}),null!==this.index&&(x(this.el,"sortable:beforeStop",t,{item:C.el}),x(this.el,"sortable:stop",t,{item:C.el}),this.index=null))},p.prototype.indexOf=function(t){return this.el.find(this.opts.items+", #"+this.placeholder.attr("id")).index(t)},p.prototype.start=function(t){if(!this.opts.disabled&&!C.el){if("mousedown"===t.type&&1!==t.which)return!1;if(this.opts.cancel)for(var e=w(t.target);e[0]!==this.el[0];){if(e.is(this.opts.cancel))return;e=e.parent()}if(this.opts.handle){e=w(t.target);for(var i=!1;e[0]!==this.el[0];){if(e.is(this.opts.handle)){i=!0;break}e=e.parent()}if(!i)return}if(t.stopPropagation(),t.preventDefault(),C.start(this,w(t.currentTarget),t),this.index=this.indexOf(C.el),C.el.before(C.placeholder=this.placeholder.show()),null!==this.index){var s=C.el.outerHeight?C.el.outerHeight():C.el.height();C.css("margin-bottom",-s)}this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(C.el.css("height"))),this.placeholder.width(parseFloat(C.el.css("width")))),C.adjustPlacement(t),x(this.el,"sortable:start",t,{item:C.el})}},p.prototype.enter=function(t){if(this.accept&&!this.opts.disabled){t.stopPropagation();var e=t.currentTarget,i=e===this.el[0];e!==this.placeholder[0]&&(e=w(e),i&&!this.isEmpty&&this.placeholder.parent().length||(C.placeholder=this.placeholder,this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(C.el.css("height"))),this.placeholder.width(parseFloat(C.el.css("width")))),i?(this.el.append(this.placeholder),this.el.trigger("sortable:change",{item:C.el})):this.diverted(t)))}},p.prototype.diverted=function(t){if(this.accept&&!this.opts.disabled){t.stopPropagation();var e=w(t.currentTarget);e[0]===this.el[0]||(C.placeholder=this.placeholder,this.direction=this.indexOf(this.placeholder.show())<this.indexOf(e)?"down":"up",e["down"===this.direction?"after":"before"](this.placeholder),C.adjustPlacement(t),this.el.trigger("sortable:change",{item:C.el}))}},p.prototype.drop=function(t){if(this.accept&&!this.opts.disabled&&(t.stopPropagation(),t.preventDefault(),C.el&&this.placeholder.parent().length)){x(this.el,"sortable:beforeStop",t,{item:C.el}),this.observer.disconnect();var e,i=this.indexOf(this.placeholder);i>this.index&&i--,e=null===this.index?this.opts.receiveHandler:this.opts.updateHandler||this.opts.updatePosition;var s=C.el;"function"==typeof e?e.call(this.el,{item:C.el,index:i}):(C.handle&&(s=C.el.clone()),s.insertBefore(this.placeholder)),null===this.index&&x(this.el,"sortable:receive",t,{item:s}),i!==this.index&&this.el.trigger("sortable:update",{item:s,index:i}),x(this.el,"sortable:stop",t,{item:s}),this.index=null,this.observer.observe(),C.stop(t)}},p.prototype.toArray=function(t){t||(t={});var e=t.attribute||"id",i=[];return this.el.find(this.opts.items).each(function(){i.push(w(this).prop(e))}),i},w.fn.draggable=d(e,"draggable",{cancel:"input, textarea, button, select, option",connectWith:!1,cursor:"auto",disabled:!1,handle:!1,initialized:!1,clone:!1,cloneClass:"",scope:"default"}),w.fn.droppable=d(c,"droppable",{accept:"*",activeClass:"",disabled:!1,hoverClass:"",initialized:!1,scope:"default",receiveHandler:null}),w.fn.sortable=d(p,"sortable",{accept:"*",activeClass:"",cancel:"input, textarea, button, select, option",connectWith:!1,disabled:!1,forcePlaceholderSize:!1,handle:!1,initialized:!1,items:"li, div",placeholder:"placeholder",placeholderTag:null,updateHandler:null,receiveHandler:null})}(window.Zepto||window.jQuery);